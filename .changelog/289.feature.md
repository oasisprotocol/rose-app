Discover: Backport discovery design fixes to stable branch
